import random
def choose_pivot(arr, mode='middle'):
    if mode == 'first':
        pivot_index = 0
    elif mode == 'last':
        pivot_index = len(arr) - 1
    elif mode == 'middle':
        pivot_index = len(arr) // 2
    elif mode == 'median': 
        candidates = [0, len(arr)//2, len(arr)-1]
        pivot_values = [arr[i] for i in candidates]
        median_value = sorted(pivot_values)[1]
        pivot_index = candidates[pivot_values.index(median_value)]
    else: 
        pivot_index = random.randint(0, len(arr)-1)
    
    return arr[pivot_index], pivot_index 

def quick_sort(arr, mode='random'):
    if len(arr) <= 1:
        return arr
    
    pivot, _ = choose_pivot(arr, mode) 
    
    left = [x for x in arr if x < pivot]
    middle = [x for x in arr if x == pivot]
    right = [x for x in arr if x > pivot]

    return quick_sort(left, mode) + middle + quick_sort(right, mode)


nums = input("Input your array: ").strip()
data = [int(x) for x in nums.split()]

valid_modes = ['first', 'last', 'middle', 'random', 'median']
mode = input("Ð¡hoose pivot(first, last, middle, random, median): ").strip().lower()

if mode not in valid_modes:
    print("ERRRRRRRRROOOOR, wrong mode of pivot")
    mode = input("TRY AGAIN: ").strip().lower()
    if mode not in valid_modes:
        print("Fine, I'm using random mode")
        mode = 'random'

sorted_data = quick_sort(data, mode)
print(f"Sorted array: {sorted_data}")
print(f"(Mode of pivot: {mode})")

pivot_value, pivot_index = choose_pivot(data, mode)
print(f"Pivot: value = {pivot_value}, index = {pivot_index}")